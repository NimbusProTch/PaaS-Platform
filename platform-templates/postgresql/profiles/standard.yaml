# CloudNativePG Standard Profile
# 3 instances with streaming replication, daily backups
instances: 3
postgresql:
  parameters:
    max_connections: "200"
    shared_buffers: "256MB"
    effective_cache_size: "1GB"
    work_mem: "8MB"
    checkpoint_completion_target: "0.9"
    wal_buffers: "16MB"
    
resources:
  requests:
    memory: "1Gi"
    cpu: "500m"
  limits:
    memory: "2Gi"
    cpu: "1"

storage:
  size: 50Gi
  storageClass: fast-ssd

backup:
  enabled: true
  retentionPolicy: "7d"
  schedule: "0 2 * * *"  # Daily at 2 AM
  volumeSnapshot:
    enabled: false  # On-premise, use WAL archiving instead

monitoring:
  enabled: true
  customQueriesConfigMap:
  - name: pg-stats-queries
    key: queries

# High Availability
primaryUpdateStrategy: unsupervised
nodeMaintenanceWindow:
  inProgress: false
  reusePVC: true