# Simplified Percona Server for MongoDB CR for dev profile
apiVersion: psmdb.percona.com/v1
kind: PerconaServerMongoDB
metadata:
  name: {{ .Name }}
  namespace: {{ .Namespace }}
  labels:
    infraforge.io/tenant: {{ .Tenant }}
    infraforge.io/environment: {{ .Environment }}
    infraforge.io/profile: {{ .Profile }}
  annotations:
    argocd.argoproj.io/sync-wave: "30"
spec:
  crVersion: 1.15.0
  image: percona/percona-server-mongodb:6.0.9-7
  
  secrets:
    users: {{ .Name }}-users-secret
  
  allowUnsafeConfigurations: true
  
  replsets:
  - name: rs0
    size: 1
    
    resources:
      limits:
        cpu: "1"
        memory: 2Gi
      requests:
        cpu: 500m
        memory: 1Gi
    
    volumeSpec:
      persistentVolumeClaim:
        storageClassName: standard
        accessModes: ["ReadWriteOnce"]
        resources:
          requests:
            storage: 10Gi
  
  backup:
    enabled: false
    image: percona/percona-backup-mongodb:2.3.0
  
  sharding:
    enabled: false