backup:
    barmanObjectStore:
        data:
            compression: gzip
            jobs: 2
        destinationPath: s3://postgresql-backups/cluster
        endpointURL: ""
        s3Credentials:
            accessKeyId: ACCESS_KEY_ID
            secretAccessKey: SECRET_ACCESS_KEY
            secretName: postgresql-backup-credentials
        wal:
            compression: gzip
            maxParallel: 2
    enabled: false
    retention: 30d
    schedule: 0 2 * * *
bootstrap:
    initdb:
        database: app
        owner: app
clusterName: demo-postgresql
environment: prod
highAvailability:
    affinity:
        podAntiAffinityType: required
        topologyKey: kubernetes.io/hostname
    enabled: true
    primaryUpdateStrategy: unsupervised
    synchronousReplication:
        enabled: true
        number: 1
monitoring:
    enabled: true
    prometheusRule:
        enabled: false
namespace: demo-prod
pooler:
    enabled: false
    pgbouncer:
        parameters:
            default_pool_size: "25"
            max_client_conn: "1000"
            max_db_connections: "100"
            max_user_connections: "100"
            min_pool_size: "10"
            reserve_pool_size: "5"
            reserve_pool_timeout: "3"
        poolMode: transaction
    replicas: 3
    resources:
        limits:
            cpu: 500m
            memory: 256Mi
        requests:
            cpu: 100m
            memory: 128Mi
    type: rw
postgresVersion: "16.1"
postgresql:
    parameters:
        autovacuum_max_workers: "4"
        autovacuum_naptime: 10s
        checkpoint_completion_target: "0.9"
        checkpoint_timeout: 15min
        default_statistics_target: "100"
        effective_cache_size: 6GB
        effective_io_concurrency: "200"
        log_line_prefix: '%t [%p]: user=%u,db=%d,app=%a,client=%h '
        log_min_duration_statement: "1000"
        maintenance_work_mem: 512MB
        max_connections: "500"
        max_wal_size: 8GB
        min_wal_size: 2GB
        random_page_cost: "1.1"
        shared_buffers: 2GB
        wal_buffers: 16MB
        wal_level: replica
        work_mem: 10MB
replicas: 3
resources:
    limits:
        cpu: 4000m
        memory: 8Gi
    requests:
        cpu: 2000m
        memory: 4Gi
storage:
    size: 100Gi
    storageClass: standard
tenant: demo
